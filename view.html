<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>.........</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", sans-serif;
        background: linear-gradient(135deg, #ffe6f2, #ffd1e8);
        color: #ff5fa2;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
        overflow-x: hidden;
      }

      h1 {
        margin-top: 30px;
        text-shadow: 0 0 10px #ffa6d2;
      }

      #wishes {
        margin-top: 30px;
        width: 90%;
        max-width: 600px;
        background: white;
        border-radius: 20px;
        padding: 20px;
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
        overflow-y: auto;
        max-height: 70vh;
      }

      .wish {
        background: #fff0f7;
        border: 1px solid #ffcce0;
        border-radius: 15px;
        padding: 15px;
        margin-bottom: 15px;
        box-shadow: 0 0 10px #ffd6eb;
        animation: fadeIn 0.8s ease;
      }

      .wish-time {
        font-size: 12px;
        color: #999;
        text-align: right;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      a {
        display: flex;

        margin: 25px;
        text-decoration: none;
        color: #ff69b4;
        font-weight: bold;
      }

      .heart {
        position: fixed;
        bottom: -10px;
        color: #ff69b4;
        font-size: 20px;
        animation: floatUp 6s linear infinite;
      }

      @keyframes floatUp {
        0% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateY(-100vh) scale(1.5);
          opacity: 0;
        }
      }

      .btn {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin: 10px 0;
      }

      .btn a {
        text-decoration: none;
        color: white;
        font-weight: bold;
        background: linear-gradient(135deg, #ff9fdc, #ff69b4);
        padding: 10px 25px;
        border-radius: 25px;
        box-shadow: 0 0 10px rgba(255, 105, 180, 0.4);
        transition: 0.3s;
      }

      .btn a:hover {
        transform: scale(1.1);
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.7);
      }
    </style>
  </head>

  <body>
    <h1></h1>
    <div id="wishes">Đang load</div>

    <div class="btn">
      <a href="form.html">Mún thêm</a>
      <a href="index.html">Đủ ròi</a>
    </div>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        onValue,
      } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyBxaRg5oEbL_JfYIU0bU43Hc364JPQJOYA",
        authDomain: "quangkhai20-10.firebaseapp.com",
        databaseURL: "https://quangkhai20-10-default-rtdb.firebaseio.com",
        projectId: "quangkhai20-10",
        storageBucket: "quangkhai20-10.firebasestorage.app",
        messagingSenderId: "527820631959",
        appId: "1:527820631959:web:41ed89ae9f1d8f0f1a5ed2",
      };

      const app = initializeApp(firebaseConfig);
      const db = getDatabase(app);
      const wishesDiv = document.getElementById("wishes");

      const wishesRef = ref(db, "loichuc");
      onValue(wishesRef, (snapshot) => {
        wishesDiv.innerHTML = "";
        const data = snapshot.val();
        if (!data) {
          wishesDiv.innerHTML = "Chưa có mún gì hả";
          return;
        }

        const wishesArray = Object.values(data).reverse();

        wishesArray.forEach((item) => {
          const div = document.createElement("div");
          div.className = "wish";
          div.innerHTML = `
            <div>${item.wish}</div>
            <div class="wish-time">${item.time}</div>
          `;
          wishesDiv.appendChild(div);
        });
      });

      function createHeart() {
        const heart = document.createElement("div");
        heart.classList.add("heart");
        heart.innerText = "";
        heart.style.left = Math.random() * 100 + "vw";
        heart.style.animationDuration = 4 + Math.random() * 4 + "s";
        document.body.appendChild(heart);
        setTimeout(() => heart.remove(), 6000);
      }

      setInterval(createHeart, 500);
    </script>
  </body>
</html>
